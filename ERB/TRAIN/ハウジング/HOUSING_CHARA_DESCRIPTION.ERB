;-------------------------------------------------
; ハウジング　キャラクターの行動描写
;-------------------------------------------------
@HOUSING_CHARAACT_DESC_MAIN
#DIM DYNAMIC IDX
;プレイヤーと同じ部屋にいるキャラクターの行動を表示する
WHILE _DIC_HO_CHARALIST:IDX != "-1"
    CALL HO_GET_CHARADATA(IDX, "ROOM_IDX")
    IF RESULT == HO_MASTER現在地
        CALL HO_GET_CHARADATA(IDX, "ACTION")
        CALL HO_CHARAACT_DESC(IDX, RESULTS)
    ENDIF 
    IDX ++
WEND

@HO_CHARAACT_DESC(CHARA_IDX, ACTIONTYPE)
#DIM  CHARA_IDX
#DIMS ACTIONTYPE
#DIM  DYNAMIC CHARA_ID
#DIM  DYNAMIC ROOM_IDX
#DIMS DYNAMIC ROOM_NAME
#DIMS DYNAMIC MODULE_NAME

CALL HO_GET_CHARADATA(CHARA_IDX, "CHARA_ID")
CHARA_ID = RESULT
CALL HO_GET_CHARADATA(CHARA_IDX, "ROOM_IDX")
ROOM_IDX = RESULT
CALL HO_GET_ROOM_NAME(ROOM_IDX)
ROOM_NAME = %RESULTS%
CALL HO_GET_USE_MODULE_INFO(CHARA_ID)
MODULE_NAME = %RESULTS%

SELECTCASE ACTIONTYPE
    CASE "待機"
        PRINTFORML %ANAME(CHARA_ID)%は%SPLIT_RAND("部屋をぶらぶらして/あたりをうろうろしている/所在なさげにして",1)%いる
    CASE "食事中"
        PRINTFORML %ANAME(CHARA_ID)%は%MODULE_NAME%で食事をしている
    CASE "休憩中"
        PRINTFORML %ANAME(CHARA_ID)%は%MODULE_NAME%で休憩している
    CASE "同行中"
        PRINTFORML %ANAME(CHARA_ID)%は%ANAME(MASTER)%と一緒にいる
    CASE "バーテンダー"
        PRINTFORML %ANAME(CHARA_ID)%は%MODULE_NAME%でグラスを磨いている
    CASE "飲酒中"
        PRINTFORML %ANAME(CHARA_ID)%は%MODULE_NAME%でお酒を飲んでいる
    CASE "遊戯中"
        IF STRFINDU(MODULE_NAME, "テーブル") != -1
            PRINTFORML %ANAME(CHARA_ID)%は%MODULE_NAME%でカードゲームをしている
        ELSE
            PRINTFORML %ANAME(CHARA_ID)%は%MODULE_NAME%で遊んでいる
        ENDIF
ENDSELECT