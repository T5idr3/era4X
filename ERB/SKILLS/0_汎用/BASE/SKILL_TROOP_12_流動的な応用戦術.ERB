;-----------------------------------
;基本値計算に先んじて処理するもの
;-----------------------------------
@SKILL_0_TROOP_12_EXIST
RETURN 1

@SKILL_0_TROOP_12_NAME
RESULTS = 流動的な応用戦術

;レベルは1-5まで
@SKILL_0_TROOP_12_LEVEL
RETURN 2
	
@SKILL_0_TROOP_12_EXPLANATION
RESULTS = 艦隊の与/被ダメージ、命中、回避率が『知略』によってランダム増減。(推奨知略80)

@SKILL_0_TROOP_12_EFFECT(OWN_COUNTRY, ENEMY_COUNTRY, TARGET_ID)
#DIM OWN_COUNTRY
#DIM ENEMY_COUNTRY
#DIM TARGET_ID
#DIM OWN_COMMANDER

OWN_COMMANDER = -1

SIF SHIP_COUNTRY:TARGET_ID != OWN_COUNTRY || SHIP_COUNTRY:TARGET_ID != ENEMY_COUNTRY
	RETURN
SIF COMMANDER:0 >= 0 && COMMANDER:0 < CHARANUM && CFLAG:所属 == OWN_COUNTRY
	OWN_COMMANDER = COMMANDER:0
SIF COMMANDER:1 >= 0 && COMMANDER:1 < CHARANUM && CFLAG:所属 == OWN_COUNTRY
	OWN_COMMANDER = COMMANDER:1

LOCAL = RAND(MAX(ABL:OWN_COMMANDER:知略, 1))
;鍛え上げられた知略用に天井の高い戦術。
IF LOCAL < 5
	IF SHIP_COUNTRY:TARGET_ID == OWN_COUNTRY
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_回避率:TARGET_ID, 0.90
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_命中率:TARGET_ID, 0.90
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_与ダメージ:TARGET_ID, 0.90
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_回避率:TARGET_ID, 0.90
	ELSE
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_与ダメージ:TARGET_ID, 1.10
	ENDIF
ELSEIF LOCAL < 10
	IF SHIP_COUNTRY:TARGET_ID == OWN_COUNTRY
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_回避率:TARGET_ID, 0.95
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_命中率:TARGET_ID, 0.95
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_与ダメージ:TARGET_ID, 0.95
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_回避率:TARGET_ID, 0.95
	ELSE
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_与ダメージ:TARGET_ID, 1.05
	ENDIF
;上記は戦術失敗。
ELSEIF LOCAL < 40
	IF SHIP_COUNTRY:TARGET_ID == OWN_COUNTRY
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_回避率:TARGET_ID, 1.05
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_命中率:TARGET_ID, 1.05
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_与ダメージ:TARGET_ID, 1.05
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_回避率:TARGET_ID, 1.05
	ELSE
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_与ダメージ:TARGET_ID, 0.95
	ENDIF
ELSEIF LOCAL < 80
	IF SHIP_COUNTRY:TARGET_ID == OWN_COUNTRY
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_回避率:TARGET_ID, 1.10
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_命中率:TARGET_ID, 1.10
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_与ダメージ:TARGET_ID, 1.10
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_回避率:TARGET_ID, 1.10
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_対空命中:TARGET_ID, 1.05
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_対空回避:TARGET_ID, 1.05
	ELSE
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_与ダメージ:TARGET_ID, 0.90
	ENDIF
ELSEIF LOCAL < 120
	IF SHIP_COUNTRY:TARGET_ID == OWN_COUNTRY
	TIMES SKILL_EFFECT_PERCENTAGE:TYPE_回避率:TARGET_ID, 1.15
	TIMES SKILL_EFFECT_PERCENTAGE:TYPE_命中率:TARGET_ID, 1.15
	TIMES SKILL_EFFECT_PERCENTAGE:TYPE_与ダメージ:TARGET_ID, 1.15
	TIMES SKILL_EFFECT_PERCENTAGE:TYPE_回避率:TARGET_ID, 1.15
	TIMES SKILL_EFFECT_PERCENTAGE:TYPE_対空命中:TARGET_ID, 1.10
	TIMES SKILL_EFFECT_PERCENTAGE:TYPE_対空回避:TARGET_ID, 1.10
	ELSE
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_与ダメージ:TARGET_ID, 0.85
	ENDIF
ELSEIF LOCAL >= 120
;影響力を考え最大でも抑えめ。
	IF SHIP_COUNTRY:TARGET_ID == OWN_COUNTRY
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_回避率:TARGET_ID, 1.20
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_命中率:TARGET_ID, 1.20
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_与ダメージ:TARGET_ID, 1.20
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_回避率:TARGET_ID, 1.20
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_対空命中:TARGET_ID, 1.15
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_対空回避:TARGET_ID, 1.15
	ELSE
		TIMES SKILL_EFFECT_PERCENTAGE:TYPE_与ダメージ:TARGET_ID, 0.80
	ENDIF
ENDIF
