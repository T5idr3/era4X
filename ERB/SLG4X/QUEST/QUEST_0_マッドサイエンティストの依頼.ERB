;--------------------------
; マッドサイエンティストの依頼
; $1,000,000投資すると人体改造研究所にアクセスできるクエスト
;--------------------------


;--------------------------
; クエスト受注可能か
;--------------------------
@QUEST_ACCEPTABLE_0
SIF QUEST_PROGRESS:0 < 2
	RETURN 1
RETURN 
;--------------------------
; クエストの名前を返却
;--------------------------
@QUEST_NAME_0
RESULTS = マッドサイエンティストの依頼
RETURN

;--------------------------
; クエスト本体
;--------------------------
@QUEST_BODY_0
#DIM 入力値
PRINTFORML %CALLNAME:MASTER%は謎のアンドロイドに声をかけられた
PRINTFORMW 「やあやあ、こんにちは。少し私の実験に付き合ってくれませんか？治験というやつですね」
PRINTL
PRINTFORML 実に怪しいアンドロイドだ。しかし本人は全く気にした様子もなく、話し続ける
PRINTFORML 「性別変換の手術を受けてくれるだけでいいんです。もちろん費用はこちら持ちですので、ただで構いません。いかがですか？」
PRINTFORMW %CALLNAME:MASTER%はその依頼を……
CALL ASK_YN("受け入れた", "断った")
IF RESULT
	PRINTFORML 「そうですか。気が向いたらまた声をかけてくださいよ」
	RETURN
ENDIF
PRINTFORML 「素晴らしい！ちなみにどの性別になりたいですか？」
$INPUT_LOOP
PRINTFORM 現在の性別 
SELECTCASE TALENT:MASTER:性別
	CASE 0
		PRINTL 男性
	CASE 1
		PRINTL 女性
	CASE 2
		PRINTL 女双
	CASE 3
		PRINTL 男双
	CASE 4
		PRINTL 男の娘
	CASE 5
		PRINTL 男の娘双
ENDSELECT
SETCOLOR 0X666666
CUSTOMDRAWLINE =
RESETCOLOR
PRINTBUTTON "[0] 男性", 0
PRINTL
PRINTBUTTON "[1] 女性", 1
PRINTL
PRINTBUTTON "[2] 女双", 2
PRINTL
PRINTBUTTON "[3] 男双", 3
PRINTL
PRINTBUTTON "[4] 男の娘", 4
PRINTL
PRINTBUTTON "[5] 男の娘双", 5
PRINTL
INPUT
入力値 = RESULT
IF GROUPMATCH(入力値, 0, 1, 2, 3, 4, 5) && TALENT:MASTER:性別 != 入力値
	PRINTFORML 「わかりました。それではこちらへ」
ELSE
	GOTO INPUT_LOOP
ENDIF

PRINTFORML %CALLNAME:MASTER%はタクシーに載せられ、怪しい研究所に連れて行かれた
PRINTFORMW 『ぎゅいーーーん、がんがんがんがん、どんどんどん、ぽきっ』
PRINTW ………………
PRINTW …………
PRINTW ……
PRINTFORMW 「成功です！さあ、新しい人生をお楽しみください」
PRINTL
PRINTFORMW %CALLNAME:MASTER%は性転換に成功した
TALENT:MASTER:性別 = 入力値
RETURN


