;-----------------------------------
; エンジン
;-----------------------------------
@GET_ENGIN(ID)
#DIM ID

SELECTCASE ID
	CASE 1
		SPEED = 1
		AVOID = 10
		SIZE = 1
		EQUIP_NAME = TIER1汎用小型エンジン
		PRICE = 10000
	CASE 2
		SPEED = 1
		AVOID = 10
		SIZE = 2
		EQUIP_NAME = TIER1汎用中型エンジン
		PRICE = 20000
	CASE 3
		SPEED = 1
		AVOID = 10
		SIZE = 3
		EQUIP_NAME = TIER1汎用大型エンジン
		PRICE = 40000
	CASE 4
		SPEED = 1
		AVOID = 20
		SIZE = 1
		EQUIP_NAME = TIER2汎用小型エンジン
		PRICE = 20000
	CASE 5
		SPEED = 1
		AVOID = 20
		SIZE = 2
		EQUIP_NAME = TIER2汎用中型エンジン
		PRICE = 40000
	CASE 6
		SPEED = 1
		AVOID = 20
		SIZE = 3
		EQUIP_NAME = TIER2汎用大型エンジン
		PRICE = 80000
	CASE 7
		SPEED = 2
		AVOID = 5
		SIZE = 1
		EQUIP_NAME = TIER3汎用小型高速エンジン
		PRICE = 40000
	CASE 8
		SPEED = 2
		AVOID = 5
		SIZE = 2
		EQUIP_NAME = TIER2汎用中型高速エンジン
		PRICE = 80000
	CASE 9
		SPEED = 2
		AVOID = 5
		SIZE = 3
		EQUIP_NAME = TIER2汎用大型高速エンジン
		PRICE = 160000
	CASE 10
		SPEED = 1
		AVOID = 10
		SIZE = 4
		EQUIP_NAME = TIER1汎用超大型エンジン
		PRICE = 320000
	CASEELSE
		EQUIP_NAME = ---
ENDSELECT

;-----------------------------------
; エンジンの説明
;-----------------------------------
@GET_ENGIN_DESCRIPTION(ID)
#DIM ID
CALL GET_ENGIN(ID)
SELECTCASE ID
	CASE 1 TO 10
		PRINTFORML %EQUIP_NAME%
		PRINTFORML スピード  : {SPEED}
		PRINTFORML 回避      : {AVOID}
		PRINTFORML サイズ    : {SIZE}
	CASEELSE
		PRINTFORML = ---
ENDSELECT

;-----------------------------------
; エンジンの資材
;-----------------------------------
@GET_ENGIN_RESOURCE(USE_RESOURCE, ID)
#DIM REF USE_RESOURCE
#DIM ID

SELECTCASE ID
	CASE 1
		USE_RESOURCE:耐熱合金 = 1
		USE_RESOURCE:ジェットガス = 1
	CASE 2
		USE_RESOURCE:耐熱合金 = 2
		USE_RESOURCE:ジェットガス = 2
	CASE 3
		USE_RESOURCE:耐熱合金 = 4
		USE_RESOURCE:ジェットガス = 4
	CASE 4
		USE_RESOURCE:耐熱合金 = 2
		USE_RESOURCE:ジェットガス = 2
	CASE 5
		USE_RESOURCE:耐熱合金 = 4
		USE_RESOURCE:ジェットガス = 4
	CASE 6
		USE_RESOURCE:耐熱合金 = 8
		USE_RESOURCE:ジェットガス = 8
	CASE 7
		USE_RESOURCE:耐熱合金 = 4
		USE_RESOURCE:ジェットガス = 4
	CASE 8
		USE_RESOURCE:耐熱合金 = 8
		USE_RESOURCE:ジェットガス = 8
	CASE 9
		USE_RESOURCE:耐熱合金 = 16
		USE_RESOURCE:ジェットガス = 16
ENDSELECT

;-----------------------------------
; エンジンの換装
;-----------------------------------
@CHANGE_ENGIN(SHIP_ID, SALE_COUNTRY, EQUIP_ID)
#DIM SHIP_ID
#DIM SALE_COUNTRY
#DIM EQUIP_ID
#DIM USE_RESOURCE, ITEM_LENGTH
#DIM ITER
#DIM RESOURCE_COUNT
#DIM LACK_RESOURCE, ITEM_LENGTH
#DIM CAN_BUY

CAN_BUY = 1

CALL GET_ENGIN_RESOURCE(USE_RESOURCE, EQUIP_ID)
FOR ITER, 0, ITEM_LENGTH
	SIF USE_RESOURCE:ITER == 0
		CONTINUE
	RESOURCE_COUNT = GET_RESOURCE_NUM(SHIP_POSITION:SHIP_ID, SALE_COUNTRY, ITER)
	IF USE_RESOURCE:ITER > RESOURCE_COUNT
		LACK_RESOURCE:ITER += USE_RESOURCE:ITER - RESOURCE_COUNT
		CAN_BUY = 0
	ENDIF
NEXT

IF CAN_BUY == 0
	IF SHIP_COUNTRY:SHIP_ID == PLAYER_COUNTRY
		SETCOLOR 0XFF0000
		PRINTL [CAUTION] 資源不足で装備を購入できませんでした
		RESETCOLOR
	ENDIF
	RETURN 0
ENDIF

FOR ITER, 0, ITEM_LENGTH
	SIF USE_RESOURCE:ITER == 0
		CONTINUE
	RESULT = REMOVE_RESOURCE(SHIP_COUNTRY:SHIP_ID, SALE_COUNTRY, ITER, USE_RESOURCE:ITER)
	SHIP_EQUIP:エンジン:SHIP_ID = EQUIP_ID
NEXT
RETURN 1
