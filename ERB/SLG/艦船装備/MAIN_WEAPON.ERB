;-----------------------------------
; メインウェポン
;-----------------------------------
@GET_MAIN_WEAPON(ID)
#DIM ID

SELECTCASE ID
	CASE 1
		DAMAGE = 50
		FIRE_RATE = 3
		HIT_RATE = 80
		FIRE_RANGE = 1
		SIZE = 1
		EQUIP_NAME = TIER1小型汎用コイルガン
		PRICE = 10000
	CASE 2
		DAMAGE = 100
		FIRE_RATE = 3
		HIT_RATE = 80
		FIRE_RANGE = 2
		SIZE = 2
		EQUIP_NAME = TIER1中型汎用コイルガン
		PRICE = 20000
	CASE 3
		DAMAGE = 300
		FIRE_RATE = 3
		HIT_RATE = 80
		FIRE_RANGE = 3
		SIZE = 3
		EQUIP_NAME = TIER1大型汎用コイルガン
		PRICE = 40000
	CASE 4
		DAMAGE = 50
		FIRE_RATE = 10
		HIT_RATE = 80
		FIRE_RANGE = 1
		SIZE = 2
		EQUIP_NAME = TIER1中型汎用連装コイルガン
		PRICE = 20000
	CASE 5
		DAMAGE = 100
		FIRE_RATE = 10
		HIT_RATE = 80
		FIRE_RANGE = 1
		SIZE = 3
		EQUIP_NAME = TIER1大型汎用連装コイルガン
		PRICE = 40000
	CASE 11
		DAMAGE = 100
		FIRE_RATE = 2
		HIT_RATE = 70
		FIRE_RANGE = 1
		SIZE = 1
		EQUIP_NAME = TIER1小型汎用レーザー
		PRICE = 10000
	CASE 12
		DAMAGE = 200
		FIRE_RATE = 2
		HIT_RATE = 70
		FIRE_RANGE = 2
		SIZE = 2
		EQUIP_NAME = TIER1中型汎用レーザー
		PRICE = 20000
	CASE 13
		DAMAGE = 400
		FIRE_RATE = 2
		HIT_RATE = 70
		FIRE_RANGE = 3
		SIZE = 3
		EQUIP_NAME = TIER1大型汎用レーザー
		PRICE = 40000
	CASE 14
		DAMAGE = 2000
		FIRE_RATE = 1
		HIT_RATE = 70
		FIRE_RANGE = 4
		SIZE = 4
		EQUIP_NAME = TIER1超大型汎用レーザー
		PRICE = 80000
	CASE 21
		DAMAGE = 150
		FIRE_RATE = 1
		HIT_RATE = 100
		FIRE_RANGE = 3
		SIZE = 1
		EQUIP_NAME = TIER1小型汎用ミサイル
		PRICE = 10000
	CASE 22
		DAMAGE = 500
		FIRE_RATE = 1
		HIT_RATE = 100
		FIRE_RANGE = 3
		SIZE = 2
		EQUIP_NAME = TIER1中型汎用ミサイル
		PRICE = 20000
	CASE 23
		DAMAGE = 1000
		FIRE_RATE = 1
		HIT_RATE = 100
		FIRE_RANGE = 3
		SIZE = 3
		EQUIP_NAME = TIER1大型汎用ミサイル
		PRICE = 40000
	CASE 101
		FIRE_RATE = 20
		HIT_RATE = 80
		FIRE_RANGE = 4
		SIZE = 4
		AIR_SHIP_HP = 100
		AIR_SHIP_POWER = 35
		EQUIP_NAME = TIER1対艦攻撃機
		PRICE = 50000
	CASE 102
		FIRE_RATE = 12
		HIT_RATE = 90
		FIRE_RANGE = 4
		SIZE = 4
		AIR_SHIP_HP = 200
		AIR_SHIP_POWER = 50
		EQUIP_NAME = TIER2対艦攻撃機
		PRICE = 90000
	CASE 103
		FIRE_RATE = 40
		HIT_RATE = 70
		FIRE_RANGE = 4
		SIZE = 4
		AIR_SHIP_HP = 500
		AIR_SHIP_POWER = 20
		EQUIP_NAME = TIER1対艦重爆撃機
		PRICE = 50000
	CASEELSE
		EQUIP_NAME = ---
ENDSELECT

;-----------------------------------
; メインウェポンの説明
;-----------------------------------
@GET_MAIN_WEAPON_DESCRIPTION(ID)
#DIM ID
CALL GET_MAIN_WEAPON(ID)
SELECTCASE ID
	CASE 1 TO 5, 11 TO 14, 21 TO 23
		PRINTFORML %EQUIP_NAME%
		PRINTFORML ダメージ  : {DAMAGE}
		PRINTFORML 射撃レート: {FIRE_RATE}発/ターン
		PRINTFORML 命中率    : {HIT_RATE}
		PRINTFORML 有効距離  : {FIRE_RANGE}
		PRINTFORML サイズ    : {SIZE}
	CASE 101 TO 103
		PRINTFORML %EQUIP_NAME%
		PRINTFORML 射撃レート: {FIRE_RATE}発/ターン
		PRINTFORML 命中率    : {HIT_RATE}
		PRINTFORML 有効距離  : {FIRE_RANGE}
		PRINTFORML サイズ    : {SIZE}
		PRINTFORML 耐久      : {AIR_SHIP_HP}
		PRINTFORML 対艦攻撃力: {AIR_SHIP_POWER}
	CASEELSE
		PRINTFORML = ---
ENDSELECT

;-----------------------------------
; メインウェポンの資材
;-----------------------------------
@GET_MAIN_WEAPON_RESOURCE(USE_RESOURCE, ID)
#DIM REF USE_RESOURCE
#DIM ID

SELECTCASE ID
	CASE 1
		USE_RESOURCE:武装合金 = 2
		USE_RESOURCE:武装制御機器 = 1
	CASE 2
		USE_RESOURCE:武装合金 = 4
		USE_RESOURCE:武装制御機器 = 2
	CASE 3
		USE_RESOURCE:武装合金 = 8
		USE_RESOURCE:武装制御機器 = 4
	CASE 4
		USE_RESOURCE:武装合金 = 4
		USE_RESOURCE:武装制御機器 = 2
	CASE 5
		USE_RESOURCE:武装合金 = 8
		USE_RESOURCE:武装制御機器 = 4
	CASE 11
		USE_RESOURCE:武装合金 = 1
		USE_RESOURCE:耐熱合金 = 1
		USE_RESOURCE:武装制御機器 = 1
	CASE 12
		USE_RESOURCE:武装合金 = 2
		USE_RESOURCE:耐熱合金 = 2
		USE_RESOURCE:武装制御機器 = 2
	CASE 13
		USE_RESOURCE:武装合金 = 4
		USE_RESOURCE:耐熱合金 = 4
		USE_RESOURCE:武装制御機器 = 4
	CASE 14
		USE_RESOURCE:武装合金 = 8
		USE_RESOURCE:耐熱合金 = 8
		USE_RESOURCE:武装制御機器 = 8
	CASE 21
		USE_RESOURCE:武装合金 = 1
		USE_RESOURCE:耐熱合金 = 1
		USE_RESOURCE:武装制御機器 = 1
	CASE 22
		USE_RESOURCE:武装合金 = 2
		USE_RESOURCE:耐熱合金 = 2
		USE_RESOURCE:武装制御機器 = 2
	CASE 23
		USE_RESOURCE:武装合金 = 4
		USE_RESOURCE:耐熱合金 = 4
		USE_RESOURCE:武装制御機器 = 4
	CASE 101
		USE_RESOURCE:武装合金 = 1
		USE_RESOURCE:耐熱合金 = 1
		USE_RESOURCE:武装制御機器 = 1
		USE_RESOURCE:ジェットガス = 1
	CASE 102
		USE_RESOURCE:武装合金 = 2
		USE_RESOURCE:耐熱合金 = 2
		USE_RESOURCE:武装制御機器 = 2
		USE_RESOURCE:ジェットガス = 2
	CASE 103
		USE_RESOURCE:武装合金 = 1
		USE_RESOURCE:耐熱合金 = 1
		USE_RESOURCE:武装制御機器 = 1		
		USE_RESOURCE:ジェットガス = 1
ENDSELECT

;-----------------------------------
; メインウェポンの換装
;-----------------------------------
@CHANGE_MAIN_WEAPON(SHIP_ID, SALE_COUNTRY, EQUIP_ID)
#DIM SHIP_ID
#DIM SALE_COUNTRY
#DIM EQUIP_ID
#DIM USE_RESOURCE, ITEM_LENGTH
#DIM ITER
#DIM RESOURCE_COUNT
#DIM LACK_RESOURCE, ITEM_LENGTH
#DIM CAN_BUY

CAN_BUY = 1
CALL GET_MAIN_WEAPON_RESOURCE(USE_RESOURCE, EQUIP_ID)
FOR ITER, 0, ITEM_LENGTH
	SIF USE_RESOURCE:ITER == 0
		CONTINUE
	RESOURCE_COUNT = GET_RESOURCE_NUM(SHIP_POSITION:SHIP_ID, SALE_COUNTRY, ITER)
	IF USE_RESOURCE:ITER > RESOURCE_COUNT
		LACK_RESOURCE:ITER += USE_RESOURCE:ITER - RESOURCE_COUNT
		CAN_BUY = 0
	ENDIF
NEXT

IF CAN_BUY == 0
	IF SHIP_COUNTRY:SHIP_ID == PLAYER_COUNTRY
		SETCOLOR 0XFF0000
		PRINTL [CAUTION] 資源不足で装備を購入できませんでした
		RESETCOLOR
	ENDIF
	RETURN 0
ENDIF

FOR ITER, 0, ITEM_LENGTH
	SIF USE_RESOURCE:ITER == 0
		CONTINUE
	RESULT = REMOVE_RESOURCE(SHIP_COUNTRY:SHIP_ID, SALE_COUNTRY, ITER, USE_RESOURCE:ITER)
	SHIP_EQUIP:主砲:SHIP_ID = EQUIP_ID
NEXT
RETURN 1

