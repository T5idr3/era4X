;公衆便所プレイの処理
;奴隷を放置して不特定多数の性欲の捌け口とします
;場所によって奴隷の相手が変化し、強い存在であるほど効果と得られる金額が上がる
;安定して収入が得られる辺り、事前予約制なのかもしれない
@PUBLIC_TOILET
;使用する変数の初期化
A = 0
B = 0
S = 0
V = 0
C = 0
D = 0

;公衆便所プレイを行う対象の選択
PRINTL 公衆便所プレイを行う奴隷を選択してください
REPEAT CHARANUM
	SIF COUNT == MASTER
		CONTINUE
	SIF CFLAG:COUNT:1 < 2
		CONTINUE
	SIF CFLAG:COUNT:12 > 0
		CONTINUE
	SIF CFLAG:COUNT:1 == 2 && (TALENT:COUNT:服従 || TALENT:COUNT:隷属) && BASE:COUNT:0 > 500
		PRINTFORML [{COUNT}] - %CALLNAME:COUNT%
REND
PRINTL [100] - 戻る
$INPUT_LOOP
INPUT
IF RESULT == 100
	RETURN 0
ELSEIF RESULT < 0 || RESULT >= CHARANUM
	GOTO INPUT_LOOP
ELSEIF RESULT == MASTER
	GOTO INPUT_LOOP
ELSEIF CFLAG:RESULT:1 < 2
	GOTO INPUT_LOOP
ELSEIF CFLAG:RESULT:12 > 0
	GOTO INPUT_LOOP
ELSEIF (TALENT:RESULT:服従 == 0 && TALENT:RESULT:隷属== 0) || BASE:RESULT:0 <= 500
	GOTO INPUT_LOOP
ELSE
	A = RESULT
ENDIF


PRINTL 公衆便所プレイを行う場所を選択してください
PRINTL [0]   - 森林バイオーム
SIF BASE:A:0 > 500
	PRINTL [1]   - 村の郊外
SIF BASE:A:0 > 800
	PRINTL [2]   - 黄昏の森
SIF BASE:A:0 > 1000
	PRINTL [3]   - ネザー
SIF BASE:A:0 > 1200
	PRINTL [4]   - 舞倉市郊外
PRINTL [100] - やめる
DRAWLINE
$INPUT_LOOP_2
INPUT
IF RESULT == 0
	B = 1
ELSEIF RESULT == 1 && BASE:A:0 > 500
	B = 2
ELSEIF RESULT == 2 && BASE:A:0 > 800
	B = 3
ELSEIF RESULT == 3 && BASE:A:0 > 1000
	B = 4
ELSEIF RESULT == 4 && BASE:A:0 > 1200
	B = 5
ELSEIF RESULT == 100
	RETURN 0
ELSE
	GOTO INPUT_LOOP_2
ENDIF

$INPUT_LOOP_3
IF CFLAG:A:108
	PRINTL <避妊結界有効>
	J = 1
ELSE
	PRINTL 避妊の有無と方法を選択してください
	PRINTL [0]   - 避妊しない
	SIF MONEY > 6000
		PRINTFORML [1]   - 子宮内避妊具($-6000）
	PRINTL [100] - 戻る
	INPUT
	IF RESULT == 0
		J = 0
	ELSEIF RESULT == 1 && MONEY > 6000
		J = 1
	ELSEIF RESULT == 100
		RETURN 0
	ELSE
		GOTO INPUT_LOOP_3
	ENDIF
ENDIF

;金額の計算
;ABLによる基礎値計算
V = 0
;ABL:従順をみる
IF ABL:A:0 == 0
	V = 0
ELSEIF ABL:A:0 == 1
	V = 1200
ELSEIF ABL:A:0 == 2
	V = 1800
ELSEIF ABL:A:0 == 3
	V = 2500
ELSEIF ABL:A:0 == 4
	V = 3300
ELSEIF ABL:A:0 == 5
	V = 4200
ELSEIF ABL:A:0 == 6
	V = 5200
ELSEIF ABL:A:0 == 7
	V = 6300
ELSEIF ABL:A:0 == 8
	V = 7500
ELSEIF ABL:A:0 == 9
	V = 8800
ELSE
	V = 12000
ENDIF
SIF V > 0
	PRINTFORML %ABLNAME:0%{ABL:A:0}LV +{V}
S += V


;ABL:欲望をみる
IF ABL:A:1 == 0
	V = 0
ELSEIF ABL:A:1 == 1
	V = 1000
ELSEIF ABL:A:1 == 2
	V = 1500
ELSEIF ABL:A:1 == 3
	V = 2100
ELSEIF ABL:A:1 == 4
	V = 2800
ELSEIF ABL:A:1 == 5
	V = 3600
ELSEIF ABL:A:1 == 6
	V = 4500
ELSEIF ABL:A:1 == 7
	V = 5500
ELSEIF ABL:A:1 == 8
	V = 6700
ELSEIF ABL:A:1 == 9
	V = 8000
ELSE
	V = 10000
ENDIF
SIF V > 0
	PRINTFORML %ABLNAME:1%{ABL:A:1}LV +{V}
S += V


;ABL:技巧をみる
IF ABL:A:2 == 0
	V = 0
ELSEIF ABL:A:2 == 1
	V = 800
ELSEIF ABL:A:2 == 2
	V = 1200
ELSEIF ABL:A:2 == 3
	V = 1700
ELSEIF ABL:A:2 == 4
	V = 2300
ELSEIF ABL:A:2 == 5
	V = 3000
ELSEIF ABL:A:2 == 6
	V = 3800
ELSEIF ABL:A:2 == 7
	V = 4600
ELSEIF ABL:A:2 == 8
	V = 5500
ELSEIF ABL:A:2 == 9
	V = 6500
ELSE
	V = 8000
ENDIF
SIF V > 0
	PRINTFORML %ABLNAME:2%{ABL:A:2}LV +{V}
S += V


;ABL:Ｃ感覚をみる
IF ABL:A:3 == 0
	V = 0
ELSEIF ABL:A:3 == 1
	V = 800
ELSEIF ABL:A:3 == 2
	V = 1200
ELSEIF ABL:A:3 == 3
	V = 1700
ELSEIF ABL:A:3 == 4
	V = 2300
ELSEIF ABL:A:3 == 5
	V = 3000
ELSEIF ABL:A:3 == 6
	V = 3800
ELSEIF ABL:A:3 == 7
	V = 4600
ELSEIF ABL:A:3 == 8
	V = 5500
ELSEIF ABL:A:3 == 9
	V = 6500
ELSE
	V = 8000
ENDIF
SIF V > 0
	PRINTFORML %ABLNAME:3%{ABL:A:3}LV +{V}
S += V


;ABL:Ｖ感覚をみる
IF ABL:A:4 == 0
	V = 0
ELSEIF ABL:A:4 == 1
	V = 800
ELSEIF ABL:A:4 == 2
	V = 1200
ELSEIF ABL:A:4 == 3
	V = 1700
ELSEIF ABL:A:4 == 4
	V = 2300
ELSEIF ABL:A:4 == 5
	V = 3000
ELSEIF ABL:A:4 == 6
	V = 3800
ELSEIF ABL:A:4 == 7
	V = 4600
ELSEIF ABL:A:4 == 8
	V = 5500
ELSEIF ABL:A:4 == 9
	V = 6500
ELSE
	V = 8000
ENDIF
SIF V > 0
	PRINTFORML %ABLNAME:4%{ABL:A:4}LV +{V}
S += V


;ABL:Ａ感覚をみる
IF ABL:A:5 == 0
	V = 0
ELSEIF ABL:A:5 == 1
	V = 800
ELSEIF ABL:A:5 == 2
	V = 1200
ELSEIF ABL:A:5 == 3
	V = 1700
ELSEIF ABL:A:5 == 4
	V = 2300
ELSEIF ABL:A:5 == 5
	V = 3000
ELSEIF ABL:A:5 == 6
	V = 3800
ELSEIF ABL:A:5 == 7
	V = 4600
ELSEIF ABL:A:5 == 8
	V = 5500
ELSEIF ABL:A:5 == 9
	V = 6500
ELSE
	V = 8000
ENDIF
SIF V > 0
	PRINTFORML %ABLNAME:5%{ABL:A:5}LV +{V}
S += V


;ABL:Ｂ感覚をみる
IF ABL:A:6 == 0
	V = 0
ELSEIF ABL:A:6 == 1
	V = 800
ELSEIF ABL:A:6 == 2
	V = 1200
ELSEIF ABL:A:6 == 3
	V = 1700
ELSEIF ABL:A:6 == 4
	V = 2300
ELSEIF ABL:A:6 == 5
	V = 3000
ELSEIF ABL:A:6 == 6
	V = 3800
ELSEIF ABL:A:6 == 7
	V = 4600
ELSEIF ABL:A:6 == 8
	V = 5500
ELSEIF ABL:A:6 == 9
	V = 6500
ELSE
	V = 8000
ENDIF
SIF V > 0
	PRINTFORML %ABLNAME:6%{ABL:A:6}LV +{V}
S += V


;ABL:奉仕精神をみる
IF ABL:A:7 == 0
	V = 0
ELSEIF ABL:A:7 == 1
	V = 1200
ELSEIF ABL:A:7 == 2
	V = 1800
ELSEIF ABL:A:7 == 3
	V = 2500
ELSEIF ABL:A:7 == 4
	V = 3300
ELSEIF ABL:A:7 == 5
	V = 4200
ELSEIF ABL:A:7 == 6
	V = 5200
ELSEIF ABL:A:7 == 7
	V = 6300
ELSEIF ABL:A:7 == 8
	V = 7500
ELSEIF ABL:A:7 == 9
	V = 8800
ELSE
	V = 12000
ENDIF
SIF V > 0
	PRINTFORML %ABLNAME:7%{ABL:A:7}LV +{V}
S += V


;ABL:露出癖をみる
IF ABL:A:8 == 0
	V = 0
ELSEIF ABL:A:8 == 1
	V = 800
ELSEIF ABL:A:8 == 2
	V = 1200
ELSEIF ABL:A:8 == 3
	V = 1700
ELSEIF ABL:A:8 == 4
	V = 2300
ELSEIF ABL:A:8 == 5
	V = 3000
ELSEIF ABL:A:8 == 6
	V = 3800
ELSEIF ABL:A:8 == 7
	V = 4600
ELSEIF ABL:A:8 == 8
	V = 5500
ELSEIF ABL:A:8 == 9
	V = 6500
ELSE
	V = 8000
ENDIF
SIF V > 0
	PRINTFORML %ABLNAME:8%{ABL:A:8}LV +{V}
S += V


;ABL:マゾっ気をみる
IF ABL:A:9 == 0
	V = 0
ELSEIF ABL:A:9 == 1
	V = 1000
ELSEIF ABL:A:9 == 2
	V = 1500
ELSEIF ABL:A:9 == 3
	V = 2100
ELSEIF ABL:A:9 == 4
	V = 2800
ELSEIF ABL:A:9 == 5
	V = 3600
ELSEIF ABL:A:9 == 6
	V = 4500
ELSEIF ABL:A:9 == 7
	V = 5500
ELSEIF ABL:A:9 == 8
	V = 6700
ELSEIF ABL:A:9 == 9
	V = 8000
ELSE
	V = 10000
ENDIF
SIF V > 0
	PRINTFORML %ABLNAME:9%{ABL:A:9}LV +{V}
S += V


;ABL:精液中毒をみる
IF ABL:A:16 == 0
	V = 0
ELSEIF ABL:A:16 == 1
	V = 1500
ELSEIF ABL:A:16 == 2
	V = 2200
ELSEIF ABL:A:16 == 3
	V = 3000
ELSEIF ABL:A:16 == 4
	V = 3900
ELSEIF ABL:A:16 == 5
	V = 4900
ELSEIF ABL:A:16 == 6
	V = 6000
ELSEIF ABL:A:16 == 7
	V = 7200
ELSEIF ABL:A:16 == 8
	V = 8500
ELSEIF ABL:A:16 == 9
	V = 10000
ELSE
	V = 14000
ENDIF
SIF V > 0
	PRINTFORML %ABLNAME:16%{ABL:A:16}LV +{V}
S += V


;ABL:セックス中毒をみる
IF ABL:A:18 == 0
	V = 0
ELSEIF ABL:A:18 == 1
	V = 1500
ELSEIF ABL:A:18 == 2
	V = 2200
ELSEIF ABL:A:18 == 3
	V = 3000
ELSEIF ABL:A:18 == 4
	V = 3900
ELSEIF ABL:A:18 == 5
	V = 4900
ELSEIF ABL:A:18 == 6
	V = 6000
ELSEIF ABL:A:18 == 7
	V = 7200
ELSEIF ABL:A:18 == 8
	V = 8500
ELSEIF ABL:A:18 == 9
	V = 10000
ELSE
	V = 14000
ENDIF
SIF V > 0
	PRINTFORML %ABLNAME:18%{ABL:A:18}LV +{V}
S += V


V = 100
;素質による売却額補正値計算
;TALENT:処女をみる
IF TALENT:A:処女
	C = 100
	V += 100
	PRINTFORML %TALENTNAME:0% ＋{C}％
ENDIF
;TALENT:再生処女をみる
IF TALENT:A:再生処女
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:1% ＋{C}％
ENDIF
;素質による増減
;陥落素質
;恋慕
IF TALENT:A:恋慕
	C = 50
	V -= 50
	PRINTFORML %TALENTNAME:3% －{C}％
ENDIF
;淫乱
IF TALENT:A:淫乱
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:4% ＋{C}％
ENDIF
;服従
IF TALENT:A:服従
	C = 50
	V += 50
	PRINTFORML %TALENTNAME:5% ＋{C}％
ENDIF
;親愛
IF TALENT:A:親愛
	C = 80
	V -= 80
	PRINTFORML %TALENTNAME:6% －{C}％
ENDIF
;娼婦
IF TALENT:A:娼婦
	C = 60
	V += 60
	PRINTFORML %TALENTNAME:7% ＋{C}％
ENDIF
;隷属
IF TALENT:A:隷属
	C = 100
	V += 100
	PRINTFORML %TALENTNAME:8% ＋{C}％
ENDIF



;その他素質
;臆病
IF TALENT:A:臆病
	C = 20
	V -= 20
	PRINTFORML %TALENTNAME:10% －{C}％
ENDIF
;反抗的
IF TALENT:A:反抗的
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:11% ＋{C}％
ENDIF
;気丈
IF TALENT:A:気丈
	C = 40
	V += 40
	PRINTFORML %TALENTNAME:12% ＋{C}％
ENDIF
;素直
IF TALENT:A:素直
	C = 20
	V -= 20
	PRINTFORML %TALENTNAME:13% －{C}％
ENDIF
;大人しい
IF TALENT:A:大人しい
	C = 20
	V -= 20
	PRINTFORML %TALENTNAME:14% －{C}％
ENDIF
;プライド高い
IF TALENT:A:プライド高い
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:15% ＋{C}％
ENDIF
;生意気
IF TALENT:A:生意気
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:16% ＋{C}％
ENDIF
;プライド低い
IF TALENT:A:プライド低い
	C = 20
	V -= 20
	PRINTFORML %TALENTNAME:17% －{C}％
ENDIF
;ツンデレ
IF TALENT:A:ツンデレ
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:18% ＋{C}％
ENDIF
;自制心
IF TALENT:A:自制心
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:20% ＋{C}％
ENDIF
;無関心
IF TALENT:A:無関心
	C = 20
	V -= 20
	PRINTFORML %TALENTNAME:21% －{C}％
ENDIF
;感情乏しい
IF TALENT:A:感情乏しい
	C = 20
	V -= 20
	PRINTFORML %TALENTNAME:22% －{C}％
ENDIF
;好奇心
IF TALENT:A:好奇心
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:23% ＋{C}％
ENDIF
;保守的
IF TALENT:A:保守的
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:24% ＋{C}％
ENDIF
;一線越えない
IF TALENT:A:一線越えない
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:27% ＋{C}％
ENDIF
;目立ちたがり
IF TALENT:A:目立ちたがり
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:28% ＋{C}％
ENDIF
;貞操観念
IF TALENT:A:貞操観念
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:30% ＋{C}％
ENDIF
;貞操無頓着
IF TALENT:A:貞操無頓着
	C = 20
	V -= 20
	PRINTFORML %TALENTNAME:31% －{C}％
ENDIF
;解放
IF TALENT:A:解放
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:33% ＋{C}％
ENDIF
;恥じらい
IF TALENT:A:恥じらい
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:35% ＋{C}％
ENDIF
;恥薄い
IF TALENT:A:恥薄い
	C = 10
	V -= 10
	PRINTFORML %TALENTNAME:36% －{C}％
ENDIF
;痛みに弱い
IF TALENT:A:痛みに弱い
	C = 20
	V -= 20
	PRINTFORML %TALENTNAME:40% －{C}％
ENDIF
;痛みに強い
IF TALENT:A:痛みに強い
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:41% ＋{C}％
ENDIF
;濡れやすい
IF TALENT:A:濡れやすい
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:42% ＋{C}％
ENDIF
;濡れにくい
IF TALENT:A:濡れにくい
	C = 10
	V -= 10
	PRINTFORML %TALENTNAME:43% －{C}％
ENDIF
;習得早い
IF TALENT:A:習得早い
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:50% ＋{C}％
ENDIF
;習得遅い
IF TALENT:A:習得遅い
	C = 10
	V -= 10
	PRINTFORML %TALENTNAME:51% －{C}％
ENDIF
;舌使い
IF TALENT:A:舌使い
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:52% ＋{C}％
ENDIF
;薬毒耐性
IF TALENT:A:薬毒耐性
	C = 20
	V -= 20
	PRINTFORML %TALENTNAME:56% －{C}％
ENDIF
;おもらし癖
IF TALENT:A:おもらし癖
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:57% ＋{C}％
ENDIF
;自慰しやすい
IF TALENT:A:自慰しやすい
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:60% ＋{C}％
ENDIF
;汚臭鈍感
IF TALENT:A:汚臭鈍感
	C = 20
	V -= 20
	PRINTFORML %TALENTNAME:61% －{C}％
ENDIF
;汚臭敏感
IF TALENT:A:汚臭敏感
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:62% ＋{C}％
ENDIF
;献身的
IF TALENT:A:献身的
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:63% ＋{C}％
ENDIF
;快感に素直
IF TALENT:A:快感に素直
	C = 30
	V -= 30
	PRINTFORML %TALENTNAME:70% －{C}％
ENDIF
;快感の否定
IF TALENT:A:快感の否定
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:71% ＋{C}％
ENDIF
;即落ち
IF TALENT:A:即落ち
	C = 50
	V -= 50
	PRINTFORML %TALENTNAME:73% －{C}％
ENDIF
;自慰狂い
IF TALENT:A:自慰狂い
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:74% ＋{C}％
ENDIF
;セックス狂
IF TALENT:A:セックス狂
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:75% ＋{C}％
ENDIF
;尻穴狂い
IF TALENT:A:尻穴狂い
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:76% ＋{C}％
ENDIF
;淫乳
IF TALENT:A:淫乳
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:77% ＋{C}％
ENDIF
;倒錯的
IF TALENT:A:倒錯的
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:80% ＋{C}％
ENDIF
;男嫌い
IF TALENT:A:男嫌い
	C = 10
	V -= 10
	PRINTFORML %TALENTNAME:82% －{C}％
ENDIF
;サド
IF TALENT:A:サド
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:83% ＋{C}％
ENDIF
;マゾ
IF TALENT:A:マゾ
	C = 40
	V += 40
	PRINTFORML %TALENTNAME:84% ＋{C}％
ENDIF
;妄信
IF TALENT:A:妄信
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:86% ＋{C}％
ENDIF
;小悪魔
IF TALENT:A:小悪魔
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:87% ＋{C}％
ENDIF
;女嫌い
IF TALENT:A:女嫌い
	C = 10
	V -= 10
	PRINTFORML %TALENTNAME:88% －{C}％
ENDIF
;妖狐
IF TALENT:A:妖狐
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:91% ＋{C}％
ENDIF
;魅力
IF TALENT:A:魅力
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:92% ＋{C}％
ENDIF
;謎の魅力
IF TALENT:A:謎の魅力
	C = 100
	V += 100
	PRINTFORML %TALENTNAME:94% ＋{C}％
ENDIF
;Ｃ鈍感（感覚が4以上なら無効）
IF TALENT:A:Ｃ鈍感 && ABL:A:3 < 4
	C = 30
	V -= 30
	PRINTFORML %TALENTNAME:101% －{C}％
ENDIF
;Ｃ敏感（感覚が3未満なら無効）
IF TALENT:A:Ｃ敏感 && ABL:A:3 >= 3
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:102% ＋{C}％
ENDIF
;Ｖ鈍感（感覚が4以上なら無効）
IF TALENT:A:Ｖ鈍感 && ABL:A:4 < 4
	C = 30
	V -= 30
	PRINTFORML %TALENTNAME:103% －{C}％
ENDIF
;Ｖ敏感（感覚が3未満なら無効）
IF TALENT:A:Ｖ敏感 && ABL:A:4 >= 3
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:104% ＋{C}％
ENDIF
;Ａ鈍感（感覚が4以上なら無効）
IF TALENT:A:Ａ鈍感 && ABL:A:5 < 4
	C = 30
	V -= 30
	PRINTFORML %TALENTNAME:105% －{C}％
ENDIF
;Ａ敏感（感覚が3未満なら無効）
IF TALENT:A:Ａ敏感 && ABL:A:5 >= 3
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:106% ＋{C}％
ENDIF
;Ｂ鈍感（感覚が4以上なら無効）
IF TALENT:A:Ｂ鈍感 && ABL:A:6 < 4
	C = 30
	V -= 30
	PRINTFORML %TALENTNAME:107% －{C}％
ENDIF
;Ｂ敏感（感覚が3未満なら無効）
IF TALENT:A:Ｂ敏感 && ABL:A:6 >= 3
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:108% ＋{C}％
ENDIF
;貧乳
IF TALENT:A:貧乳
	C = 20
	V -= 20
	PRINTFORML %TALENTNAME:109% －{C}％
ENDIF
;絶壁
IF TALENT:A:絶壁
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:110% ＋{C}％
ENDIF
;巨乳
IF TALENT:A:巨乳
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:111% ＋{C}％
ENDIF
;爆乳
IF TALENT:A:爆乳
	C = 10
	V += 10
	PRINTFORML %TALENTNAME:112% ＋{C}％
ENDIF
;回復早い
IF TALENT:A:回復早い
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:130% ＋{C}％
ENDIF
;回復遅い
IF TALENT:A:回復遅い
	C = 20
	V -= 20
	PRINTFORML %TALENTNAME:131% －{C}％
ENDIF
;吸血鬼
IF TALENT:A:吸血鬼
	C = 30
	V += 30
	PRINTFORML %TALENTNAME:132% ＋{C}％
ENDIF
;動物耳
IF TALENT:A:動物耳
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:143% ＋{C}％
ENDIF
;人気
IF TALENT:A:人気
	C = 50
	V += 50
	PRINTFORML %TALENTNAME:145% ＋{C}％
ENDIF
;蓬莱人
IF TALENT:A:蓬莱人
	C = 70
	V += 70
	PRINTFORML %TALENTNAME:147% ＋{C}％
ENDIF
;母乳体質
IF TALENT:A:母乳体質
	C = 20
	V += 20
	PRINTFORML %TALENTNAME:149% ＋{C}％
ENDIF


;補正値が0以下の場合は1にする
SIF V <= 0
	V = 1

PRINTFORML 加算倍率合計 {V}％

;補正値の適用
S *= V
S /= 100

;崩壊,狂気,妊娠は報酬をかなり低くする（従順によって、80％まで回復）
IF TALENT:A:崩壊 || TALENT:A:狂気 || TALENT:A:妊娠
PRINTL 
	IF TALENT:A:崩壊
		S *= ABL:A:0
		TIMES S , 0.08
		Z = ABL:A:0
		Z *= 8
		PRINTFORML %TALENTNAME:9% ×{Z}％
	ELSEIF TALENT:A:狂気
		S *= ABL:A:0
		TIMES S , 0.08
		Z = ABL:A:0
		Z *= 8
		PRINTFORML %TALENTNAME:141% ×{Z}％
	ELSEIF TALENT:A:妊娠
		S *= ABL:A:0
		TIMES S , 0.08
		Z = ABL:A:0
		Z *= 8
		PRINTFORML %TALENTNAME:153% ×{Z}％
	ENDIF
PRINTL 
ENDIF


;場所による補正
IF B == 1
	TIMES S , 0.20
ELSEIF B == 2
	TIMES S , 0.40
ELSEIF B == 3
	TIMES S , 0.60
ELSEIF B == 4
	TIMES S , 0.80
ELSEIF B == 5
	TIMES S , 1.00
ENDIF

;VOICEROID補正
IF TALENT:A:160
	PRINTFORML %TALENTNAME:160% ×200％
	TIMES S , 2.00
ELSEIF TALENT:A:161
	PRINTFORML %TALENTNAME:161% ×200％
	TIMES S , 2.00
ELSEIF TALENT:A:162
	PRINTFORML %TALENTNAME:162% ×200％
	TIMES S , 2.00
ENDIF
;難易度処理
;EASY
IF FLAG:4 == 1
	PRINTFORML 難易度:EASY ×120％
	TIMES S , 1.20
;NORMAL
ELSEIF FLAG:4 == 2
	TIMES S , 1.00
;HARD
ELSEIF FLAG:4 == 3
	PRINTFORML 難易度:HARD ×80％
	TIMES S , 0.80
ENDIF

;公衆便所プレイを実行するか？
IF S > 0
	PRINTFORML 利益は${S}程度が見込めます
ELSE
	PRINTFORMW 利益が見込めないので、中止します
	RETURN 0
ENDIF
PRINTFORML %CALLNAME:A%で公衆便所プレイを行いますか？
PRINTL [0]   - 実行する
PRINTL [100] - やめる
$INPUT_LOOP_4
INPUT
IF RESULT == 100
	RETURN 0
ELSEIF RESULT != 0
	GOTO INPUT_LOOP_4
ENDIF

IF J > 0 && CFLAG:A:108 == 0
	PRINTL 避妊具の費用として、$6000を使いました
	MONEY -= 6000
	CFLAG:A:108 = 1
ENDIF

;実行処理
PRINTFORML %CALLNAME:A%で公衆便所プレイを実行しました


;イベント口上の表示
U = 0
IF ASSI >= 0
	SIF ASSI == A
		U = 1
ENDIF
T = TARGET
TARGET = A
TFLAG:13 = 22
CALL KOJO_MESSAGE_EVENT
TARGET = T
SIF U
	ASSI = A


;体力の減少
;魔法の森
SIF  B == 1
	BASE:A:0 -= 300
;人里郊外
SIF  B == 2
	BASE:A:0 -= 500
;迷いの竹林
SIF  B == 3
	BASE:A:0 -= 800
;妖怪の山
SIF  B == 4
	BASE:A:0 -= 1000
;妖怪の山・山腹
SIF  B == 5
	BASE:A:0 -= 1200

;ストレス値の付加
CFLAG:A:10 += 3

;経験、珠の加算処理
;VとAのプレイ差
;オトコはAのみ
IF TALENT:A:オトコ
	D = ABL:A:5
	E = 0
	F = B
ELSEIF (ABL:A:4 > ABL:A:5) && B > 1
	D = ABL:A:4-ABL:A:5
	E = (B+D/2)*5
	F = (B-D/2)*5
ELSEIF B > 1
	D = ABL:A:5-ABL:A:4
	E = (B-D/2)*5
	F = (B+D/2)*5
ENDIF
;奴隷が処女の場合
IF EXP:A:Ｖ経験 == 0 && TALENT:A:処女 && B > 1
	E += B*3
	G = 20
ENDIF
SIF E < 0
	E = 0
SIF F < 0
	F = 0
EXP:A:Ｖ経験 += E
EXP:A:Ａ経験 += F
EXP:A:絶頂経験 += (E+F)/3
;ふたなりかオトコ
SIF TALENT:A:ふたなり || TALENT:A:オトコ
	EXP:A:射精経験 += (E+F)/3
EXP:A:性交経験 += (E+F)
;膣射経験
IF B > 1 && CFLAG:A:108 == 0
	EXP:A:膣射経験 += E
	CFLAG:A:105 += E
ENDIF
EXP:A:精液経験 += B*5
EXP:A:フェラ経験 += B*3
JUEL:A:1 += E*50
JUEL:A:2 += F*50
JUEL:A:6 += (E+F)*30
JUEL:A:8 += (E+F)*20
JUEL:A:100 += (E+F+G)*100/ABL:A:0

PRINTFORML 【%CALLNAME:A%の経験と珠】

;経験表示は一括で行う
SIF E > 0
	PRINTFORML %EXPNAME:0%＋{E}
SIF F > 0
	PRINTFORML %EXPNAME:1%＋{F}
SIF E > 0 || F > 0
	PRINTFORML %EXPNAME:2%＋{(E+F)/3}
SIF (TALENT:A:ふたなり || TALENT:A:オトコ) && (E > 0 || F > 0)
	PRINTFORML %EXPNAME:3%＋{(E+F)/3}
SIF E > 0 || F > 0
	PRINTFORML %EXPNAME:4%＋{(E+F)}
SIF E > 0
	PRINTFORML %EXPNAME:5%＋{E}
PRINTFORML %EXPNAME:20%＋{B*5}
PRINTFORML %EXPNAME:22%＋{B*3}
IF TALENT:A:処女 && B > 1
	PRINTFORML 処女喪失
	PRINTFORML %EXPNAME:50%＋3
	EXP:A:異常経験 += 3
	TALENT:A:処女 = 0
ELSEIF TALENT:A:再生処女 && B > 1
	PRINTFORML 再生処女喪失
	TALENT:A:再生処女 = 0
ENDIF
;珠表示も同様
SIF E > 0
	PRINTFORML %PALAMNAME:1%の珠＋{E*50}
SIF F > 0
	PRINTFORML %PALAMNAME:2%の珠＋{F*50}
PRINTFORML %PALAMNAME:5%の珠＋{B*5}
PRINTFORML %PALAMNAME:6%の珠＋{B*30}
PRINTFORML %PALAMNAME:8%の珠＋{B*20}
SIF ABL:A:9 >= ABL:A:10
	PRINTFORML %PALAMNAME:10%の珠＋{B*5}
PRINTFORML %PALAMNAME:100%の珠＋{((E+F+G)*100+B*30)/ABL:A:0}

;最後に金額の加算
PRINTFORMW %CALLNAME:A%での公衆便所プレイで${S}を得ました
MONEY += S

;休憩フラグを立てる
FLAG:0 = 1
BEGIN TURNEND

RETURN 1



