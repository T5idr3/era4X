era4X用搭乗員選択UI変更パッチ(テスト版)

2023/01/24時点でのera4X(replaceK)用のパッチです

◆概要
プログラム素人が個人で楽しむために改造して遊んでいた一部のパッチ化です
艦隊の艦長およびクルー交代周りのUIに大幅な変更を加えます
今回はかなりの変更内容になり、テストプレイを十分にできていないため
パッチを適応する場合は”必ず”バックアップを取ってからお願いします

お手数ですが、不具合が見つかった場合もスレでの報告をお願いします
ERBを直接上書きするか、差分を使って変更箇所を直接変更してください

記述の一部はeratohoKの SHOP_SLG31_部隊編成.ERB からお借りしました
一部使用が変更する可能性があります
※仕様変更しました

改変元はなるべくコメントアウトで残してます
改変、修正、加筆、等は自由にどうぞ

◆変更内容２
・艦長変更時
仕様変更して行動不能時の艦長選択不可はなくなりました


◆変更内容１
@SHOW_BOARDING_SLAVE_LIST を
@SHOW_BOARDING_SLAVE_LIST(SHIP_ID, LIST_MODE) に変更(LIST_MODE 0 = 艦長変更モード 1 = 搭乗員変更モード)
搭乗可能なメンバーの表示だけだけでなく乗せ換え処理も統合
それにより以下の２つの関数を使用しなくなります（そのまま残しています）
SLG4X\SHIP.ERB  1434行  @CHANGE_CREW(SHIP_ID)
SYSTEM\INFO_4x.ERB  383行  @CHANGE_BOARDER(ARG:0)

また一部状態を能力値の前に表示するようにしました
１ページに表示する人数を30人から25人に減らしています

搭乗員表示時に[選択中のみ表示]というボタンを設けたのでクルー一覧表示が必要なくなりました
艦隊ツリー編成時の"CREW"のボタン化を廃止して以下の関数の内容削除しています
SYSTEM\INFO_4x.ERB 1547行 @SHOW_CREW_LIST(SHIP_ID)

@SHOW_CREW_LIST(SHIP_ID)は私が前のパッチで追加した関数であり一か所でしか使われてなかったので
念のため残してますが削除して問題ないなら完全に削除してください


・艦長変更時
TMP_IS_FREE:CHARA_ID:0 の値を使って行動不能(-1)の時は艦長を選択できなくしています
行動不能についてはSLG\SLG_FUNCTION_TMP.ERB 190行目 @TMP_CREATE_IS_FREE_MAPを参照
動物 触手妊娠 育児中の子供 クールタイムのあるキャラ などが選択できなくなってます

ただeraK系列からの名残のTMP_IS_FREE:CHARA_ID:0を使っており
era4xで他に判定に使わない可能性もあり、また関係なく全員選択したいと不評だった場合
仕様変更してパッチを上げなおします


・搭乗員変更時
居住区モードとの兼ね合いでこちらは状態に関係なく全員選択可能
一度に複数人の乗り換えを可能にしています
[選択中のみ表示]を押すことで乗せる予定のメンバーだけ絞り込めます
実際の乗り換え処理は決定を押した後に行っており、キャンセルの場合搭乗員は変更せずに戻ります


・追加関数
@PRINT_BOARDING_SLAVE(CHARA_ID, LIST_MODE)
@SHOW_BOARDING_SLAVE_LIST(SHIP_ID, LIST_MODE)でのメンバー描画に使います


@CHANGE_DEBOARD_SLAVE_POS(CHARA_ID)
艦長や搭乗員を船から降ろす際に船が港にいない場合
降ろしたメンバーがその場に降ろされ宇宙空間を漂うことになっていたので

プレイヤーの星＞プレイヤーの港＞国家ID順の評価がマイナスでない星
の順で場所を検索し、ヒットした場所にCHARA_IDのポジションを移す関数です

