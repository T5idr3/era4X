◇パッチの目的
・航空戦艦(主砲と艦載機を混載した船)の実現

・ミサイルや魚雷のデータと発射装置のデータを突き合わせる事で標準的な組み合わせ(小型艦に小型ミサイル・大型艦には大型ミサイルを、規定数搭載する)の他に
「小型艦でも普通に扱える小さいミサイルをサイズ4主砲スロットに満載」や「オーバーサイズ気味な魚雷を無理矢理搭載した小型艦」みたいなものを個別の専用データ(大サイズの〇〇を小サイズスロットにも搭載できる様にしたバージョン)抜きに実現

◇パッチの注意点
既存の主砲データとしてのミサイル・魚雷・艦載機はそのまま扱えます。
空母等の主砲枠の処理は変更していないので艦載機しか表示されないままです。
値段等はそのままなので「大型主砲スロットに大型射出装置を搭載して・射出対象を小サイズ品を搭載」などとした場合には過剰に低コストになると思われます。

◇追加データの方針

射出対象(PAYLOAD)
既存のミサイル・魚雷・艦載機をベースに、その装備を使える様になる最小のサイズの「サイズ〇標準型射出装置」を装備した際に元々の射撃レート(艦載機は搭載数)になる様に容積(VOLUME)を追加しました。
それに伴い艦載機以外はFIRE_RATEを、艦載機はAIR_SHIP_COUNTを消しています。

主砲(MAIN_WEAPON)
その射出対象を使える様になる最小のサイズの「サイズ〇標準型射出装置」を装備した際に既存のミサイル・魚雷・艦載機の元々の射撃レート(艦載機は搭載数)になる様に対応サイズ(PAYLOAD_MAX_SIZE)と容量(WEAPONS_BAY)のデータを設定し
同じ主砲サイズの射出装置においてより小さいサイズの射出対象しか扱えない「サイズ〇大型艦向け射出装置」には一つ上のサイズ〇標準型射出装置の1.2倍の
同じ主砲サイズの射出装置においてより大きいサイズの射出対象を扱える「サイズ〇小型艦向け射出装置」には一つ下のサイズ〇標準型射出装置の1.2分の1の容量を設定してあります。
(これはミサイルにおいて「総HPは小型のものを大量に撃つ方が多い=敵の対空が高い場合にもダメージ出力を維持しやすい」「ダメージそのものは小型艦向けを使ってでも大型のものを撃つ方が多い」という差別化を行える値です)



◇変更点(抜けが存在する可能性大)

・全般において
TRYCALLFORM GET_MAIN_WEAPON_STATUS_{変数名} の代わりに CALL GET_SHIP_MAIN_WEAPON_STATUS で処理する様に変更した箇所多数
(射出装置と射出対象の双方を見て補正を加えた後のデータを使いたい部分)

SLG.ERH
船装備定数に「射出対象」(8)を追加
EQUIP_TYPE_LENGTHを9に

EQUIP_CATEGORY_NAMEに「射出対象」・EQUIP_CATEGORY_NAME_ENに「PAYLOAD」を追加

武器の種類定数に「射出装置」(12)を追加
攻撃属性を13に

WEAPON_TYPE_NAMEに「射出装置」・WEAPON_TYPE_NAME_ENに「LAUNCHER」を追加

SIELD_DAMAGE_PERCENTAGEおよびARMOR_DAMAGE_PERCENTAGEの最後に, 1を追加(射出装置分の値の設定)


SHIP_WINDOW.ERB
表示回りを対応する様に変更・(対応のついでで)副砲等における固有表示が可能な様に修正


SHIP.ERB
@GET_SHIP_MAIN_WEAPON_STATUS
属性が射出装置の場合には射出対象のデータをベースにして武器データを用意する様に
	射出装置は「DAMAGE」「FIRE_RATE」および属性が艦載機である場合には「AIR_SHIP_COUNT」のいずれかが0以下なら武装としての機能を持っていないと見て空きスロットと同様の処理をする様にしている
(射程確認はGET_SHIP_MAIN_WEAPON_STATUSで返ってきたデータを元にされるので格納庫の射程は0でも空きスロット(データすら読まれずに処理が飛ばされる)と同様の挙動になるので問題はないと思われる)



EQUIP_UPDATE.ERB
射出対象に対応

SLG_SHOP.ERB
射出装置および射出対象に対応
装備更新から抜ける際の処理に「当該スロットに射出装置がないか、射出装置が適合しないサイズの射出対象のまま抜けようとした際に射出対象を破棄する」処理を追加


SLG_COMBAT_CAPTURE.ERB
射出対象版の移乗用小型航宙機でも鹵獲出来る様に


EQUIP.ERH
射出対象の確認範囲用定数「PAYLOAD_TOTAL_COUNT」(80)を追加
主砲装備追加に伴いMAIN_WEAPON_TOTAL_COUNTを240に変更


CHANGE_EQUIP.ERB
@SPEC_DISPLAY
射出装置・射出対象関係の処理を追加

@LAUNCHER_SPEC_DISPLAY
射出装置の性能表示用の追加関数
(射出装置としてのデータを表示するのに変数を追加する必要があったので処理を切り分けたもの)


OTHER_GRID_ATTACK.ERB
@OTHER_GRID_ATTACK
広域変数関係で@BATTLEに追加されていたものと同様の内容を追加


SLG_COMBAT.ERB
@FIRE_TO_TARGET
対空攻撃回数の残数であるFIRED_UNTI_AIR:DEF_SHIP_IDが0の時に「対空攻撃を受けうる攻撃全般」そのものが発生しない処理になっていたのを修正

