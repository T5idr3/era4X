艦船購入条件定型処理化パッチ

◇パッチの目的
艦船の購入条件の内、普遍的に使用されている条件に関しては購入可能条件をわざわざ@TERM_OF_SALE_(ID)に書かなくてもいい様にしたい。(4Xスレ4の902)
今までに近い形式で自由な条件を設定する事もできる様にしたい。(4Xスレ4の903)
それらを両立できる処理の叩き台が欲しい。

◇具体的な変更点
@SLG_SHIP_SHOPに配列「CAN_SALE_SHIP」を追加・@IS_SALE_SHIP_(ID)へ引数を用意して定型処理で済む購入可能条件と、非定型処理で上書きする為のデータを送り返せる様に。
一般的な購入条件表示はやり取りしたデータを使って@SLG_SHIP_SHOP側でやる様にして、@TERM_OF_SALE_(ID)は特殊な購入条件表示のある艦船にのみ設定すればいい様に。
(以上SLG_SHOP.ERBおよび全艦船データ)

勢力名表示の為の(ローカル)文字列定数を追加(SLG_SHOP.ERB)
艦船購入メニュー用の定数を追加(SLG.ERH)


◇@IS_SALE_SHIP_(ID) が@SLG_SHIP_SHOPとやりとりする為の配列要素

CAN_SALE_SHIP:必要技術ID
	; 自国生産の場合に必要になる技術IDを指定する為の要素です。0以上の値で当該番号の技術の研究が必要になります。
	; その他「自国建造不可」(-1)・「技術不要」(-2)もあります。
	; 指定しない場合には自国建造不可です。

CAN_SALE_SHIP:建造可能国家
	; 建造可能な国家を各ビットに保存する為の要素です。0桁目がプレイヤー国家・11桁目がハールバルズに相当します。
	;「SETBIT CAN_SALE_SHIP:建造可能国家, 国家ID_(国家名) + 国家ID_ビット演算ヘッダー調整」などで指定してください。(国家ID_ビット演算ヘッダー調整 は仕様変更をする事になったとしても手を付ける必要のある部分を減らすのが主目的の定数です)
	; 指定しない場合には全国家で建造不能です。自国生産には関与しません。

CAN_SALE_SHIP:必要好感度
	; その港のオーナーからの好感度がこの数値以上の時に建造可能国家から購入可能になります。
	; 自国生産には関与しません。指定しない場合には好感度が-1以上で購入可能です。

CAN_SALE_SHIP:強制可不可判定 
	; 他の条件を全て無視して1で建造可能・0で建造不可能にします。
	; 自国生産の場合にも機能します。指定しない場合(-1)には変更させません。
	; @IS_SALE_SHIP_(ID)を従来の様な使い方をしたい時や、他の条件での判定もさせつつ・特定条件下でのみ「絶対に買えない/買える」状況を作る様な使い方もできると思います。

CAN_SALE_SHIP:特殊条件
	; 購入不能時の条件表示を非定型文で表示する為の項目です。1を指定した時にのみTERM_OF_SALE_(ID)が呼ばれます。
	; 最終的にその艦の条件が表示されるかどうかは@TERM_OF_SALE_(ID)が返すRESULTの値次第です。


主として「CAN_SALE_SHIP:必要技術ID」「CAN_SALE_SHIP:建造可能国家」「CAN_SALE_SHIP:必要好感度」が定型処理の為の変数で
「CAN_SALE_SHIP:強制可不可判定」「CAN_SALE_SHIP:特殊条件」が非定型処理をする為の変数です。
定型処理を行う場合には「CAN_SALE_SHIP:必要技術ID」「CAN_SALE_SHIP:建造可能国家」「CAN_SALE_SHIP:必要好感度」を利用して購入不能時の条件表示も行っています。


◇具体例
既存の船の置き換え例としては
「CAN_SALE_SHIP:強制可不可判定」は「SHIP_39_軍用大型輸送船.ERB」(国家転覆クエスト関係の"R_COMPLETE_RESEARCH:1"が判定に組み込まれています)で
「CAN_SALE_SHIP:特殊条件」は「SHIP_129_マンティスⅣ機動歩兵.ERB」(条件表示が非定型文です)で実際に使っています。

◇備考
「SHIP_123_URL‐48M級作業船.ERB」はCALL GET_STAR_ID_FROM_POS(CHARACTER_POSITION)が無いのでどの国でも・どの港でも買える状態でしたが、銀河人民統一連邦の港でのみ買える状態になっています。
(何も無しでいきなりRESULTを使って判定しているのは流石に変な感じなので)


◇おまけ
新規艦船:養殖宇宙かつお (SHIP_101_養殖宇宙かつお.ERB)

現在の期数に応じて購入可能な場所が変動する、装甲スロットが1つ少なく・クルー人数が3人の代わりに回避が25ある宇宙まぐろのコンパチ艦です。
「CAN_SALE_SHIP:特殊条件」で@TERM_OF_SALE_(ID)を呼ばせています。

使用する場合はおまけフォルダ内のSHIP_101_養殖宇宙かつお.ERBおよびSHIP_MODEL.ERHを艦船フォルダに入れて使用してください。